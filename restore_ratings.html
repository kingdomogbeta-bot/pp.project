<!DOCTYPE html>
<html>
<head>
    <title>Restore Product Ratings</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; }
        h1 { color: #333; }
        .success { color: green; padding: 10px; background: #e8f5e9; border-radius: 4px; margin: 10px 0; }
        .info { color: #1976d2; padding: 10px; background: #e3f2fd; border-radius: 4px; margin: 10px 0; }
        .warning { color: #f57c00; padding: 10px; background: #fff3e0; border-radius: 4px; margin: 10px 0; }
        button { background: #1976d2; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        button:hover { background: #1565c0; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 4px; overflow-x: auto; max-height: 300px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚≠ê Restore Product Ratings</h1>
        <p>This will restore all star ratings and review counts to your products.</p>
        
        <button onclick="restoreRatings()">Restore All Ratings Now</button>
        
        <div id="result"></div>
    </div>

    <script>
        // Original products data with ratings
        const defaultProducts = [
            { id: 'p1', rating: 4.8, reviews: 512 },
            { id: 'p2', rating: 4.7, reviews: 856 },
            { id: 'p3', rating: 4.6, reviews: 423 },
            { id: 'p4', rating: 4.9, reviews: 1203 },
            { id: 'p5', rating: 4.6, reviews: 214 },
            { id: 'p6', rating: 4.4, reviews: 589 },
            { id: 'p7', rating: 4.7, reviews: 678 },
            { id: 'p8', rating: 4.6, reviews: 445 },
            { id: 'p9', rating: 4.5, reviews: 892 },
            { id: 'p10', rating: 4.8, reviews: 721 },
            { id: 'p11', rating: 4.7, reviews: 1156 },
            { id: 'p12', rating: 4.6, reviews: 734 }
        ];

        function restoreRatings() {
            try {
                let restoreCount = 0;

                // Restore in merchant_products
                const merchant = localStorage.getItem('merchant_products');
                if (merchant) {
                    let products = JSON.parse(merchant);
                    products = products.map(p => {
                        const ratingData = defaultProducts.find(d => d.id === p.id);
                        if (ratingData) {
                            p.rating = ratingData.rating;
                            p.reviews = ratingData.reviews;
                            restoreCount++;
                        }
                        return p;
                    });
                    localStorage.setItem('merchant_products', JSON.stringify(products));
                }

                // Restore in adminProducts
                const admin = localStorage.getItem('adminProducts');
                if (admin) {
                    let products = JSON.parse(admin);
                    products = products.map(p => {
                        const ratingData = defaultProducts.find(d => d.id === p.id);
                        if (ratingData) {
                            p.rating = ratingData.rating;
                            p.reviews = ratingData.reviews;
                        }
                        return p;
                    });
                    localStorage.setItem('adminProducts', JSON.stringify(products));
                }

                document.getElementById('result').innerHTML = `
                    <div class="success">
                        ‚úÖ Ratings restored successfully!<br>
                        <strong>Restored ratings for ${restoreCount} products</strong>
                    </div>
                    <div class="warning">
                        ‚ö†Ô∏è Important: Make sure you preserve the rating and reviews fields when editing products in admin!
                    </div>
                    <div class="info">
                        üí° Now go back to your store and refresh the page (Ctrl+F5) to see the star ratings again
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: #f9f9f9; border-radius: 4px;">
                        <strong>Restored Ratings:</strong>
                        <pre>
p1 (Headphones): ‚≠ê 4.8 (512 reviews)
p2 (Sneakers): ‚≠ê 4.7 (856 reviews)
p3 (Backpack): ‚≠ê 4.6 (423 reviews)
p4 (Smart Watch): ‚≠ê 4.9 (1203 reviews)
p5 (Coffee Mug): ‚≠ê 4.6 (214 reviews)
p6 (Mouse): ‚≠ê 4.4 (589 reviews)
p7 (Denim Jacket): ‚≠ê 4.7 (678 reviews)
p8 (Desk Lamp): ‚≠ê 4.6 (445 reviews)
p9 (Charging Pad): ‚≠ê 4.5 (892 reviews)
p10 (Yoga Mat): ‚≠ê 4.8 (721 reviews)
p11 (Water Bottle): ‚≠ê 4.7 (1156 reviews)
p12 (Speaker): ‚≠ê 4.6 (734 reviews)
                        </pre>
                    </div>
                `;
            } catch (e) {
                document.getElementById('result').innerHTML = `
                    <div style="color: red; padding: 10px; background: #ffebee; border-radius: 4px;">
                        ‚ùå Error: ${e.message}
                    </div>
                `;
            }
        }
    </script>
</body>
</html>
